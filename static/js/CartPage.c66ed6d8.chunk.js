"use strict";(self.webpackChunkfoodwagon_online_shop=self.webpackChunkfoodwagon_online_shop||[]).push([[263],{5543:(e,t,a)=>{a.d(t,{R:()=>s});var r=a(1694),_=a.n(r);const c={priceBlock__price:"priceBlock_priceBlock__price__FRHQY",priceBlock__price_theme:"priceBlock_priceBlock__price_theme__My3ay"};var n=a(184);const s=e=>{let{classNames:t,discount:a,price:r}=e;return(0,n.jsxs)("div",{className:c.priceBlock,children:[a?(0,n.jsxs)("div",{className:_()(c.priceBlock__price,t),children:["$ ",(r-r*a/100).toFixed(2)]}):null,(0,n.jsxs)("div",{className:_()(c.priceBlock__price,t,{[c.priceBlock__price_theme]:a}),children:["$",r.toFixed(2)]})]})}},4968:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var r=a(1632),_=a(9806),c=a(1694),n=a.n(c),s=a(2791),o=a(9434),d=a(1087),l=a(7689),i=a(61),u=a(3232),p=a(3827),m=a(7597),h=a(9298),x=a(5382),N=a(549);const j="popup_popup__U3id6",v="popup_popup__title__HP4Ru",g="popup_popup__btns__ZnERK",b="popup_popup__btnOk__7VQX1",f="popup_popup__btnClose__2uApD",C="popup_popupWrapper__MZZBQ";var k=a(184);const P=(0,s.forwardRef)(((e,t)=>{let{children:a,handleClickClose:r,handleClickOk:_,isOpen:c}=e;return(0,k.jsx)(N.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,k.jsx)("div",{className:C,children:(0,k.jsxs)("div",{className:j,ref:t,children:[(0,k.jsx)("div",{className:v,children:a}),(0,k.jsxs)("div",{className:g,children:[(0,k.jsx)("button",{className:b,onClick:_,children:"Ok"}),(0,k.jsx)("button",{className:f,onClick:r,children:"Close"})]})]})})})}));var B=a(8282);const I="modal_popup__B0qva",y="modal_popup__title__bhNTi",L="modal_popup__name__PE-yS",w="modal_popup__btns__L-n9R",O="modal_popup__btnClose__IeAx0",R="modal_popupWrapper__78v0f",S=(0,s.forwardRef)(((e,t)=>{let{handleCloseModal:a,isOpen:r,name:_,orderNumber:c}=e;const n=(0,o.v9)(h.Cn);return(0,k.jsx)(N.Z,{classNames:"alert",in:r,timeout:300,unmountOnExit:!0,children:(0,k.jsx)("div",{className:R,children:(0,k.jsxs)("div",{className:I,ref:t,children:[(0,k.jsx)("div",{className:y,children:(0,k.jsxs)("span",{className:L,children:["Order \u2116",c," from restaurant \xab",_,"\xbb was created, user: ",n]})}),(0,k.jsx)("div",{className:w,children:(0,k.jsx)("button",{className:O,onClick:a,children:"Close"})})]})})})}));var E=a(4393),T=a(4032),W=a(5543);const Q={product:"productCard_product__kWhxv",product__image:"productCard_product__image__0PTz9",product__img:"productCard_product__img__8WvhI",product__btnReturn:"productCard_product__btnReturn__E0rGW",product__btnDelete:"productCard_product__btnDelete__s-KgA",info:"productCard_info__9vGPh",info__title:"productCard_info__title__EQYJY",info__titleLink:"productCard_info__titleLink__wN532",info__name:"productCard_info__name__va583",info__nameIcon:"productCard_info__nameIcon__B1hT7",info__nameLink:"productCard_info__nameLink__bKh6S",info__price:"productCard_info__price__4Sfvn",info__price_theme:"productCard_info__price_theme__Nywr8",counter:"productCard_counter__ztm5Q",counter__btns:"productCard_counter__btns__Ir6Xj",counter__price:"productCard_counter__price__VTGt9",loadingBar:"productCard_loadingBar__3Ik57",loadingBar__inner:"productCard_loadingBar__inner__+TFjL",loading:"productCard_loading__SPeyn",loadingBar__shadow:"productCard_loadingBar__shadow__npya0",btnReturn:"productCard_btnReturn__mmvCI",returnedBlock:"productCard_returnedBlock__kR5H+",product__counterWithPrice:"productCard_product__counterWithPrice__257UO",product__info:"productCard_product__info__SB-cV",product__discount:"productCard_product__discount__7Ti1X"},U=e=>{let{amount:t,discount:a,handleAddProduct:c,handleDeleteProduct:o,handleInputCount:l,handleRemoveProduct:i,id:u,image:p,price:m,quantity:h,restaurantId:x,restaurantName:N,title:j}=e;const[v,g]=(0,s.useState)(!1),b={discount:a,id:u,image:p,price:m,restaurantId:x,restaurantName:N,title:j};return(0,s.useEffect)((()=>{if(v){const e=setTimeout((()=>{i({id:u,restaurantId:x})}),2e3);return()=>clearTimeout(e)}}),[v]),(0,k.jsxs)("div",{className:Q.product,children:[(0,k.jsx)("div",{className:Q.product__image,children:(0,k.jsxs)(d.rU,{className:Q.product__imageLink,to:"/restaurant/".concat(x,"/product/").concat(u),children:[(0,k.jsx)("img",{alt:j,className:Q.product__img,src:"/foodwagon-online-shop"+p}),a>0&&(0,k.jsx)(T.s,{classNames:Q.product__discount,discount:a,view:"smallLabel"})]})}),v?(0,k.jsxs)("div",{className:Q.returnedBlock,children:[(0,k.jsx)("button",{className:n()(Q.btnReturn,Q.product__btnReturn),onClick:()=>g(!1),children:"Restore to cart"}),(0,k.jsx)("div",{className:n()(Q.loadingBar,Q.product__loadingBar),children:(0,k.jsx)("div",{className:Q.loadingBar__inner,children:(0,k.jsx)("div",{className:Q.loadingBar__shadow})})})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:n()(Q.product__info,Q.info),children:[(0,k.jsx)("p",{className:Q.info__title,children:(0,k.jsx)(d.rU,{className:Q.info__titleLink,to:"/restaurant/".concat(x,"/product/").concat(u),children:j})}),(0,k.jsxs)("p",{className:Q.info__name,children:[(0,k.jsx)(_.G,{className:Q.info__nameIcon,icon:r.opg}),(0,k.jsx)(d.rU,{className:Q.info__nameLink,to:"/restaurant/".concat(x,"/product/").concat(u),children:N})]}),(0,k.jsx)(W.R,{discount:a,price:m})]}),(0,k.jsxs)("div",{className:n()(Q.product__counter,Q.counter),children:[(0,k.jsx)(E.A,{classNames:Q.counter__btns,handleInputQuantity:e=>{e?l({id:u,price:m,quantity:e,restaurantId:x}):g(!0)},handleMinusProduct:()=>o({id:u,restaurantId:x}),handlePlusProduct:()=>c(b),quantity:h}),(0,k.jsxs)("div",{className:Q.counter__price,children:["$ ",t&&t.toFixed(2)]}),(0,k.jsx)("button",{className:n()(Q.product__btnDelete,Q.btnDelete),onClick:()=>g(!0),children:"x"})]})]})]})},q={cart:"cartPage_cart__CLPdT",cart__title:"cartPage_cart__title__IrbR1",cart__inner:"cartPage_cart__inner__KKeqI",cart__top:"cartPage_cart__top__vzs6V",cart__list:"cartPage_cart__list__lBLWc",cart__name:"cartPage_cart__name__UTZZE",cart__empty:"cartPage_cart__empty__jpDlx",cart__result:"cartPage_cart__result__u+-j5",cart__result_color:"cartPage_cart__result_color__SxWL9",cart__message:"cartPage_cart__message__D1lbi",cart__image:"cartPage_cart__image__FIll4",cart__clearIcon:"cartPage_cart__clearIcon__37iuC",cart__clearBtn:"cartPage_cart__clearBtn__Dg8ed",cart__btnOrder:"cartPage_cart__btnOrder__Plhiw",cart__orderInfo:"cartPage_cart__orderInfo__iPxQf",cart__restaurantName:"cartPage_cart__restaurantName__eSmWN",cart__links:"cartPage_cart__links__CPEXU",cart__linkItem:"cartPage_cart__linkItem__lKjRc",popup__name:"cartPage_popup__name__yK6aa",cart__orderBtn:"cartPage_cart__orderBtn__7n4Q1"};let F=0;const A=()=>{const{pathname:e}=(0,l.TH)(),[t,a]=(0,s.useState)(""),[c,N]=(0,s.useState)(""),[j,v]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),f=(0,o.v9)(p.fU),C=(0,o.v9)(p.iq),I=(0,o.v9)(p.co),y=(0,o.v9)(h.Kj),L=(0,u.TL)(),w=(0,l.s0)();(0,s.useEffect)((()=>{window.scrollTo(0,0)}),[e]);const O=()=>{v(!1)},R=(0,i.O)(O);return I?(0,k.jsxs)("div",{className:q.cart,children:[(0,k.jsxs)("div",{className:n()(q.cart__container,"container"),children:[(0,k.jsx)("h1",{className:q.cart__title,children:"Shopping cart"}),(0,k.jsx)("div",{className:q.cart__inner,children:I&&f.map((e=>{const[t,c]=e,o=Object.values(c.items),d=c.totalAmount,l=c.totalCount,i=o[0]&&o[0].restaurantName;return(0,k.jsxs)("div",{className:q.cart__list,children:[(0,k.jsxs)("div",{className:q.cart__top,children:[(0,k.jsx)("div",{className:q.cart__restaurantName,children:i}),(0,k.jsx)("div",{className:q.cart__clear,children:(0,k.jsxs)("button",{className:q.cart__clearBtn,onClick:()=>(e=>{let{restaurantId:t,restaurantName:r}=e;a(r),N(t),v(!0)})({restaurantId:t,restaurantName:i}),children:[(0,k.jsx)(_.G,{className:q.cart__clearIcon,icon:r.Vui,size:"lg"}),"clear"]})})]}),l?(0,k.jsxs)(k.Fragment,{children:[o.map((e=>{let{quantity:t,...a}=e;return(0,s.createElement)(U,{...a,handleAddProduct:e=>{return t=e,void L((0,m.gK)(t));var t},handleDeleteProduct:e=>((e,t)=>{L(t<1?(0,m.kh)(e):(0,m.gb)(e))})(e,t),handleInputCount:e=>(e=>{L((0,m.nQ)(e))})(e),handleRemoveProduct:e=>(e=>{L((0,m.kh)(e))})(e),key:a.id,quantity:t})})),(0,k.jsxs)("div",{className:n()(q.cart__orderInfo,q.cart__orderInfo_border),children:[(0,k.jsxs)("p",{className:q.cart__result,children:["Your order for the total amount"," ",(0,k.jsxs)("span",{className:q.cart__result_color,children:["$",d&&d.toFixed(2)]})," and"," ",(0,k.jsx)("span",{className:q.cart__result_color,children:l})," items"]}),(0,k.jsx)(B.s,{classNames:q.cart__orderBtn,handleClick:()=>((e,t)=>{const r=C[e];y?(a(t),N(e),F++,b(!0),L((0,x.qQ)({id:e,list:r,name:t,orderNumber:F}))):w("/login")})(t,i),name:"Place an order"})]})]}):null]},t)}))})]}),(0,k.jsx)(S,{handleCloseModal:()=>{L((0,m.LL)({restaurantId:c})),b(!1)},isOpen:g,name:t,orderNumber:F}),(0,k.jsx)(P,{handleClickClose:O,handleClickOk:()=>{L((0,m.LL)({restaurantId:c})),v(!1)},isOpen:j,ref:R,children:(0,k.jsxs)(k.Fragment,{children:["Are you sure you want to empty the cart from ",(0,k.jsxs)("span",{className:q.popup__name,children:["\xab",t,"\xbb"]}),"?"]})})]}):(0,k.jsx)("div",{className:q.cart,children:(0,k.jsx)("div",{className:n()(q.cart__container,"container"),children:(0,k.jsx)("div",{className:q.cart__inner,children:(0,k.jsxs)("div",{className:q.cart__empty,children:[(0,k.jsx)("p",{className:q.cart__name,children:"Shopping cart is empty"}),(0,k.jsx)("p",{className:q.cart__message,children:"Use the search to find everything you need."}),(0,k.jsxs)("p",{className:q.cart__links,children:["Go to"," ",(0,k.jsx)(d.rU,{className:q.cart__linkItem,to:"/search",children:"search page"})," ","or"," ",(0,k.jsx)(d.rU,{className:q.cart__linkItem,to:"/",children:"menu"})]})]})})})})}},4393:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(1694),_=a.n(r),c=a(2791);const n={buttons:"counter_buttons__OVEIu",buttons__input:"counter_buttons__input__LU3WF",button:"counter_button__TZDrT",disabledBtn:"counter_disabledBtn__k6ceu"};var s=a(184);const o=e=>{let{classNames:t,handleInputQuantity:a,handleMinusProduct:r,handlePlusProduct:o,quantity:d}=e;const[l,i]=(0,c.useState)(d);return(0,s.jsxs)("div",{className:_()(n.buttons,t),children:[(0,s.jsx)("button",{className:_()(n.button,n.buttons__plus,{[n.disabledBtn]:l>98}),disabled:l>98,onClick:()=>{o(),i(l+1)},children:"+"}),(0,s.jsx)("input",{className:_()(n.buttons__input),maxLength:2,onChange:e=>{const t=e.target.value.replace(/[^0-9]/gi,"");""!==t?(i(+t),a(+t)):i(0)},type:"text",value:l}),(0,s.jsx)("button",{className:_()(n.buttons__minus,n.button),onClick:()=>{r(),i(l-1)},children:"\u2013"})]})};o.defaultProps={quantity:0}},4032:(e,t,a)=>{a.d(t,{s:()=>m});var r=a(1694),_=a.n(r);const c="discount_label__8oW+1",n="discount_label__discount__xZACj",s="discount_label__discountPercent__ninge",o="discount_label__discountOff__nYZns",d="discount_smallLabel__ZzO-o",l="discount_smallLabel__discount__c4Cpa",i="discount_smallLabel__discountPercent__GdmW4",u="discount_smallLabel__discountOff__WMe9z";var p=a(184);const m=e=>{let{classNames:t,discount:a,view:r}=e;const m="smallLabel"===r;return(0,p.jsxs)("div",{className:_()(c,t,{[d]:m}),children:[(0,p.jsx)("div",{className:_()(n,{[l]:m}),children:a}),(0,p.jsx)("div",{className:_()(s,{[i]:m}),children:"%"}),(0,p.jsx)("div",{className:_()(o,{[u]:m}),children:"off"})]})}},8282:(e,t,a)=>{a.d(t,{s:()=>o});var r=a(1694),_=a.n(r),c=a(3080);const n={orderButton:"orderButton_orderButton__uKFSW"};var s=a(184);const o=e=>{let{classNames:t,handleClick:a,name:r}=e;return(0,s.jsxs)("button",{className:_()(n.orderButton,t),onClick:a,children:[r,(0,s.jsx)(c.Q,{className:n.orderButton__icon,src:"".concat("/foodwagon-online-shop","/images/cards-big/btn.svg"),wrapper:"span"})]})}},61:(e,t,a)=>{a.d(t,{O:()=>_});var r=a(2791);const _=e=>{const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const a=a=>{var r;null!==(r=t.current)&&void 0!==r&&r.contains(a.target)||e()};return document.body.addEventListener("mousedown",a),()=>document.body.removeEventListener("mousedown",a)}),[e]),t}},3827:(e,t,a)=>{a.d(t,{co:()=>c,fU:()=>r,iq:()=>_});const r=e=>e.cart.addedGoods,_=e=>e.cart.cart,c=e=>e.cart.totalQuantity},9298:(e,t,a)=>{a.d(t,{Cn:()=>r,Kj:()=>_});const r=e=>e.user.email,_=e=>e.user.isAuth}}]);
//# sourceMappingURL=CartPage.c66ed6d8.chunk.js.map