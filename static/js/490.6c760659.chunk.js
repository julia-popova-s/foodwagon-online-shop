"use strict";(self.webpackChunkfoodwagon_project=self.webpackChunkfoodwagon_project||[]).push([[490],{6490:function(t,r,e){e.r(r),e.d(r,{default:function(){return T}});var n=e(1413),a=e(5987),c=e(9439),_=e(1632),o=e(9806),s=e(1694),i=e.n(s),d=e(2791),u=e(9434),l=e(7689),p=e(1087),m=function(t){(0,d.useEffect)((function(){t?(document.body.style.overflow="hidden",document.body.style.paddingRight="15px"):(document.body.style.overflow="unset",document.body.style.paddingRight="0")}),[t])},h=e(6721),f=e(4346),v=e(549),x="popup_popup__ih4BR",j="popup_popup__title__x4TCg",N="popup_popup__name__3WeIx",b="popup_popup__btns__Fw43h",g="popup_popup__btnOk__rlN5q",P="popup_popup__btnClose__bnhYs",k="popup_popupWrapper__Dhdqd",y=e(184),I=(0,d.forwardRef)((function(t,r){var e=t.handleClearOrder,n=t.handleClosePopup,a=t.name,c=t.show;return(0,y.jsx)(v.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,y.jsx)("div",{className:k,ref:r,children:(0,y.jsxs)("div",{className:x,children:[(0,y.jsxs)("div",{className:j,children:["Are you sure you want to empty the cart from ",(0,y.jsxs)("span",{className:N,children:["\xab",a,"\xbb"]}),"?"]}),(0,y.jsxs)("div",{className:b,children:[(0,y.jsx)("button",{className:g,onClick:e,children:"Ok"}),(0,y.jsx)("button",{className:P,onClick:n,children:"Close"})]})]})})})})),B=e(9831),w=e(630),C=e(4419),L=e(3782),O={product:"cardProduct_product__SJi7l",product__image:"cardProduct_product__image__ThUnz",product__img:"cardProduct_product__img__ehQ1I",product__btnReturn:"cardProduct_product__btnReturn__Hm301",product__btnDelete:"cardProduct_product__btnDelete__kybGw",info:"cardProduct_info__u5hsB",info__title:"cardProduct_info__title__ysSyy",info__titleLink:"cardProduct_info__titleLink__uUn+A",info__name:"cardProduct_info__name__Fn32N",info__nameIcon:"cardProduct_info__nameIcon__94srq",info__nameLink:"cardProduct_info__nameLink__ALZyc",info__price:"cardProduct_info__price__Dxnf-",info__price_theme:"cardProduct_info__price_theme__0dj9R",counter:"cardProduct_counter__UHr1I",counter__btns:"cardProduct_counter__btns__Qgpk0",counter__price:"cardProduct_counter__price__47qTB",loadingBar:"cardProduct_loadingBar__kqluD",loadingBar__inner:"cardProduct_loadingBar__inner__YzXAb",loading:"cardProduct_loading__DyW+Y",loadingBar__shadow:"cardProduct_loadingBar__shadow__zAJNg",btnReturn:"cardProduct_btnReturn__ozn8+",returnedBlock:"cardProduct_returnedBlock__+IejE",product__counterWithPrice:"cardProduct_product__counterWithPrice__CzWiO",product__info:"cardProduct_product__info__swjXc"};function Z(t){var r=t.amount,e=t.discount,n=t.handleAddProduct,a=t.handleDeleteProduct,s=t.handleInputCount,u=t.handleRemoveProduct,l=t.id,m=t.image,h=t.price,f=t.quantity,v=t.restaurantId,x=t.restaurantName,j=t.title,N=(0,d.useState)(!1),b=(0,c.Z)(N,2),g=b[0],P=b[1],k={discount:e,id:l,image:m,price:h,restaurantId:v,restaurantName:x,title:j};return(0,d.useEffect)((function(){if(g){var t=setTimeout((function(){u({id:l,restaurantId:v})}),2e3);return function(){return clearTimeout(t)}}}),[g]),(0,y.jsxs)("div",{className:O.product,children:[(0,y.jsx)("div",{className:O.product__image,children:(0,y.jsxs)(p.rU,{className:O.product__imageLink,to:"/restaurant/".concat(v,"/product/").concat(l),children:[(0,y.jsx)("img",{alt:j,className:O.product__img,src:"/foodwagon_project"+m}),e>0&&(0,y.jsx)(C.s,{classNames:O.product__discount,discount:e,view:"smallLabel"})]})}),g?(0,y.jsxs)("div",{className:O.returnedBlock,children:[(0,y.jsx)("button",{className:i()(O.btnReturn,O.product__btnReturn),onClick:function(){return P(!1)},children:"Restore to cart"}),(0,y.jsx)("div",{className:i()(O.loadingBar,O.product__loadingBar),children:(0,y.jsx)("div",{className:O.loadingBar__inner,children:(0,y.jsx)("div",{className:O.loadingBar__shadow})})})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:i()(O.product__info,O.info),children:[(0,y.jsx)("p",{className:O.info__title,children:(0,y.jsx)(p.rU,{className:O.info__titleLink,to:"/restaurant/".concat(v,"/product/").concat(l),children:j})}),(0,y.jsxs)("p",{className:O.info__name,children:[(0,y.jsx)(o.G,{className:O.info__nameIcon,icon:_.opg}),(0,y.jsx)(p.rU,{className:O.info__nameLink,to:"/restaurant/".concat(v,"/product/").concat(l),children:x})]}),(0,y.jsx)(L.R,{discount:e,price:h})]}),(0,y.jsxs)("div",{className:i()(O.product__counter,O.counter),children:[(0,y.jsx)(w.A,{classNames:O.counter__btns,handleInputQuantity:function(t){t?s({id:l,price:h,quantity:t,restaurantId:v}):P(!0)},handleMinusProduct:function(){return a({id:l,restaurantId:v})},handlePlusProduct:function(){return n(k)},quantity:f}),(0,y.jsxs)("div",{className:O.counter__price,children:["$ ",r&&r.toFixed(2)]}),(0,y.jsx)("button",{className:i()(O.product__btnDelete,O.btnDelete),onClick:function(){return P(!0)},children:"x"})]})]})]})}var R="modal_popup__Iw8Rl",q="modal_popup__title__u-LTO",S="modal_popup__name__FGha9",D="modal_popup__btns__p2JrJ",E="modal_popup__btnClose__Yqwd5",A="modal_popupWrapper__Lac4P",F=(0,d.forwardRef)((function(t,r){var e=t.handleCloseModal,n=t.name,a=t.orderNumber,c=t.show,_=(0,u.v9)(f.Cn);return(0,y.jsx)(v.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,y.jsx)("div",{className:A,ref:r,children:(0,y.jsxs)("div",{className:R,children:[(0,y.jsx)("div",{className:q,children:(0,y.jsxs)("span",{className:S,children:["Order \u2116",a," from restaurant \xab",n,"\xbb was created, user: ",_]})}),(0,y.jsx)("div",{className:D,children:(0,y.jsx)("button",{className:E,onClick:e,children:"Close"})})]})})})})),U={cart:"cartPage_cart__kbPrS",cart__inner:"cartPage_cart__inner__VzE2p",cart__top:"cartPage_cart__top__Kqefj",cart__list:"cartPage_cart__list__cyCTb",cart__name:"cartPage_cart__name__V1i1J",cart__empty:"cartPage_cart__empty__-+AWz",cart__result:"cartPage_cart__result__Ag0V6",cart__result_color:"cartPage_cart__result_color__QOdNX",cart__image:"cartPage_cart__image__a+qBW",cart__clear:"cartPage_cart__clear__nnQvq",cart__clearIcon:"cartPage_cart__clearIcon__e+fev",cart__clearBtn:"cartPage_cart__clearBtn__j3-N9",cart__btnOrder:"cartPage_cart__btnOrder__hprFm",cart__orderInfo:"cartPage_cart__orderInfo__dHI1g",cart__restaurantName:"cartPage_cart__restaurantName__Pic3m",cart__linkSearch:"cartPage_cart__linkSearch__PPQHz",cart__restaurantLink:"cartPage_cart__restaurantLink__bD2mr"},z=["quantity"],Q=0;var T=function(){var t=(0,l.TH)().pathname,r=(0,d.useState)(""),e=(0,c.Z)(r,2),s=e[0],v=e[1],x=(0,d.useState)(""),j=(0,c.Z)(x,2),N=j[0],b=j[1],g=(0,d.useState)(!1),P=(0,c.Z)(g,2),k=P[0],w=P[1],C=(0,d.useState)(!1),L=(0,c.Z)(C,2),O=L[0],R=L[1],q=(0,d.useRef)(null),S=(0,d.useRef)(null),D=(0,u.v9)(h.fU),E=(0,u.v9)(h.iq),A=(0,u.v9)(h.co),T=(0,u.v9)(f.Kj),W=(0,u.I0)();m(k),m(O);var J=(0,l.s0)();return(0,d.useEffect)((function(){window.scrollTo(0,0)}),[t]),(0,d.useEffect)((function(){var t=function(t){var r;null!==(r=q.current)&&void 0!==r&&r.contains(t.target)&&w(!1)};return document.body.addEventListener("click",t),function(){return document.body.removeEventListener("click",t)}}),[]),A?(0,y.jsxs)("div",{className:U.cart,children:[(0,y.jsx)("div",{className:i()(U.cart__container,"container"),children:(0,y.jsx)("div",{className:U.cart__inner,children:A&&D.map((function(t){var r=(0,c.Z)(t,2),e=r[0],s=r[1],u=Object.values(s.items),l=s.totalAmount,m=s.totalCount,x=u[0]&&u[0].restaurantName;return(0,y.jsxs)("div",{className:i()(U.cart__order,U.cart__order_border),children:[(0,y.jsxs)("div",{className:U.cart__top,children:[(0,y.jsx)("div",{className:U.cart__restaurantName,children:(0,y.jsx)(p.rU,{className:U.cart__restaurantLink,children:x})}),(0,y.jsx)("div",{className:U.cart__clear,children:(0,y.jsxs)("button",{className:U.cart__clearBtn,onClick:function(){return function(t){var r=t.restaurantId,e=t.restaurantName;v(e),b(r),w(!0)}({restaurantId:e,restaurantName:x})},children:[(0,y.jsx)(o.G,{className:U.cart__clearIcon,icon:_.Vui,size:"lg"}),"clear"]})})]}),(0,y.jsx)("div",{className:U.cart__list,children:m?(0,y.jsxs)(y.Fragment,{children:[u.map((function(t){var r=t.quantity,e=(0,a.Z)(t,z);return(0,d.createElement)(Z,(0,n.Z)((0,n.Z)({},e),{},{handleAddProduct:function(t){return r=t,void W((0,h.gK)(r));var r},handleDeleteProduct:function(t){return function(t,r){var e=t.id,n=t.restaurantId;W(r<1?(0,h.kh)({id:e,restaurantId:n}):(0,h.gb)({id:e,restaurantId:n}))}(t,r)},handleInputCount:function(t){return function(t){W((0,h.nQ)(t))}(t)},handleRemoveProduct:function(t){return function(t){var r=t.id,e=t.restaurantId;W((0,h.kh)({id:r,restaurantId:e}))}(t)},key:e.id,quantity:r}))})),(0,y.jsxs)("div",{className:i()(U.cart__orderInfo,U.cart__orderInfo_border),children:[(0,y.jsxs)("p",{className:U.cart__result,children:["Your order for the total amount $"," ",(0,y.jsx)("span",{className:U.cart__result_color,children:l&&l.toFixed(2)})," and"," ",(0,y.jsx)("span",{className:U.cart__result_color,children:m})," items"]}),(0,y.jsx)(B.k,{name:"Place an order",onClick:function(){return function(t,r){var e=E[t];T?(v(r),b(t),Q++,R(!0),W((0,f.qQ)({list:e,name:r,orderNumber:Q}))):J("/login")}(e,x)}})]})]}):null})]},e)}))})}),(0,y.jsx)(F,{handleCloseModal:function(){W((0,h.LL)({restaurantId:N})),R(!1)},name:s,orderNumber:Q,ref:S,show:O}),(0,y.jsx)(I,{handleClearOrder:function(){W((0,h.LL)({restaurantId:N})),w(!1)},handleClosePopup:function(){w(!1)},name:s,ref:q,show:k})]}):(0,y.jsx)("div",{className:U.cart,children:(0,y.jsx)("div",{className:i()(U.cart__container,"container"),children:(0,y.jsx)("div",{className:U.cart__inner,children:(0,y.jsxs)("div",{className:U.cart__empty,children:[(0,y.jsx)("p",{className:U.cart__name,children:"Shopping cart is empty"}),(0,y.jsx)("p",{className:U.cart__result,children:"Use the search to find everything you need."}),(0,y.jsx)(p.rU,{className:U.cart__linkSearch,to:"/search",children:"Go to search page"})]})})})})}},3782:function(t,r,e){e.d(r,{R:function(){return s}});var n=e(4942),a=e(1694),c=e.n(a),_={priceBlock__price:"priceBlock_priceBlock__price__4GC02",priceBlock__price_theme:"priceBlock_priceBlock__price_theme__pxvvX"},o=e(184);function s(t){var r=t.discount,e=t.price;return(0,o.jsxs)("div",{className:_.priceBlock,children:[r?(0,o.jsxs)("div",{className:_.priceBlock__price,children:["$ ",(e-e*r/100).toFixed(2)]}):null,(0,o.jsxs)("div",{className:c()(_.priceBlock__price,(0,n.Z)({},_.priceBlock__price_theme,r)),children:["$",e.toFixed(2)]})]})}},630:function(t,r,e){e.d(r,{A:function(){return d}});var n=e(4942),a=e(9439),c=e(1694),_=e.n(c),o=e(2791),s={buttons:"counter_buttons__MwR8a",buttons__input:"counter_buttons__input__cPDJv",button:"counter_button__F1VDI",disabledBtn:"counter_disabledBtn__mVuPx"},i=e(184);function d(t){var r=t.classNames,e=t.handleInputQuantity,c=t.handleMinusProduct,d=t.handlePlusProduct,u=t.quantity,l=(0,o.useState)(u),p=(0,a.Z)(l,2),m=p[0],h=p[1];return(0,i.jsxs)("div",{className:_()(s.buttons,r),children:[(0,i.jsx)("button",{className:_()(s.button,s.buttons__plus,(0,n.Z)({},s.disabledBtn,m>98)),disabled:m>98,onClick:function(){d(),h(m+1)},children:"+"}),(0,i.jsx)("input",{className:_()(s.buttons__input),maxLength:"2",onChange:function(t){var r=t.target.value.replace(/[^0-9]/gi,"");""!==r?(h(+r),e(+r)):h("")},type:"text",value:m}),(0,i.jsx)("button",{className:_()(s.buttons__minus,s.button),onClick:function(){c(),h(m-1)},children:"\u2013"})]})}d.defaultProps={quantity:0}},4419:function(t,r,e){e.d(r,{s:function(){return h}});var n=e(4942),a=e(1694),c=e.n(a),_="discount_label__jB0h4",o="discount_label__discount__NdxTg",s="discount_label__discountPercent__0Xzk2",i="discount_label__discountOff__0eCdn",d="discount_smallLabel__JhXcr",u="discount_smallLabel__discount__lvwUU",l="discount_smallLabel__discountPercent__vbNrZ",p="discount_smallLabel__discountOff__cFEvX",m=e(184);function h(t){var r=t.classNames,e=t.discount,a="smallLabel"===t.view;return(0,m.jsxs)("div",{className:c()(_,r,(0,n.Z)({},d,a)),children:[(0,m.jsx)("div",{className:c()(o,(0,n.Z)({},u,a)),children:e}),(0,m.jsx)("div",{className:c()(s,(0,n.Z)({},l,a)),children:"%"}),(0,m.jsx)("div",{className:c()(i,(0,n.Z)({},p,a)),children:"off"})]})}},9831:function(t,r,e){e.d(r,{k:function(){return i}});var n=e(1694),a=e.n(n),c=e(3080),_="buttonOrder_buttonOrder__e7jBP",o="buttonOrder_buttonOrder__icon__SMDP7",s=e(184);function i(t){var r=t.classNames,e=t.name,n=t.onClick;return(0,s.jsxs)("button",{className:a()(_,r),onClick:n,children:[e,(0,s.jsx)(c.Q,{className:o,src:"".concat("/foodwagon_project","/images/cards-big/btn.svg"),wrapper:"span"})]})}},5987:function(t,r,e){e.d(r,{Z:function(){return a}});var n=e(3366);function a(t,r){if(null==t)return{};var e,a,c=(0,n.Z)(t,r);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(t);for(a=0;a<_.length;a++)e=_[a],r.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(c[e]=t[e])}return c}}}]);
//# sourceMappingURL=490.6c760659.chunk.js.map