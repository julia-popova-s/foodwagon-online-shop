"use strict";(self.webpackChunkfoodwagon_project=self.webpackChunkfoodwagon_project||[]).push([[490],{6490:function(t,e,r){r.r(e),r.d(e,{default:function(){return T}});var n=r(1413),a=r(5987),c=r(9439),_=r(1632),o=r(9806),s=r(1694),i=r.n(s),d=r(2791),u=r(9434),l=r(7689),p=r(1087),m=function(t){(0,d.useEffect)((function(){t?(document.body.style.overflow="hidden",document.body.style.paddingRight="15px"):(document.body.style.overflow="unset",document.body.style.paddingRight="0")}),[t])},h=r(6721),f=r(4346),v=r(549),x="popup_popup__ih4BR",j="popup_popup__title__x4TCg",N="popup_popup__name__3WeIx",b="popup_popup__btns__Fw43h",g="popup_popup__btnOk__rlN5q",P="popup_popup__btnClose__bnhYs",k="popup_popupWrapper__Dhdqd",y=r(184),I=(0,d.forwardRef)((function(t,e){var r=t.handleClearOrder,n=t.handleClosePopup,a=t.name,c=t.show;return(0,y.jsx)(v.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,y.jsx)("div",{className:k,ref:e,children:(0,y.jsxs)("div",{className:x,children:[(0,y.jsxs)("div",{className:j,children:["Are you sure you want to empty the cart from ",(0,y.jsxs)("span",{className:N,children:["\xab",a,"\xbb"]}),"?"]}),(0,y.jsxs)("div",{className:b,children:[(0,y.jsx)("button",{className:g,onClick:r,children:"Ok"}),(0,y.jsx)("button",{className:P,onClick:n,children:"Close"})]})]})})})})),B=r(9831),w=r(630),C=r(4419),O=r(3782),L={product:"cardProduct_product__SJi7l",product__image:"cardProduct_product__image__ThUnz",product__img:"cardProduct_product__img__ehQ1I",product__btnReturn:"cardProduct_product__btnReturn__Hm301",product__btnDelete:"cardProduct_product__btnDelete__kybGw",info:"cardProduct_info__u5hsB",info__title:"cardProduct_info__title__ysSyy",info__titleLink:"cardProduct_info__titleLink__uUn+A",info__name:"cardProduct_info__name__Fn32N",info__nameIcon:"cardProduct_info__nameIcon__94srq",info__nameLink:"cardProduct_info__nameLink__ALZyc",info__price:"cardProduct_info__price__Dxnf-",info__price_theme:"cardProduct_info__price_theme__0dj9R",counter:"cardProduct_counter__UHr1I",counter__btns:"cardProduct_counter__btns__Qgpk0",counter__price:"cardProduct_counter__price__47qTB",loadingBar:"cardProduct_loadingBar__kqluD",loadingBar__inner:"cardProduct_loadingBar__inner__YzXAb",loading:"cardProduct_loading__DyW+Y",loadingBar__shadow:"cardProduct_loadingBar__shadow__zAJNg",btnReturn:"cardProduct_btnReturn__ozn8+",returnedBlock:"cardProduct_returnedBlock__+IejE",product__counterWithPrice:"cardProduct_product__counterWithPrice__CzWiO",product__info:"cardProduct_product__info__swjXc"};function Z(t){var e=t.amount,r=t.discount,n=t.handleAddProduct,a=t.handleDeleteProduct,s=t.handleInputCount,u=t.handleRemoveProduct,l=t.id,m=t.image,h=t.price,f=t.quantity,v=t.restaurantId,x=t.restaurantName,j=t.title,N=(0,d.useState)(!1),b=(0,c.Z)(N,2),g=b[0],P=b[1],k={discount:r,id:l,image:m,price:h,restaurantId:v,restaurantName:x,title:j};return(0,d.useEffect)((function(){if(g){var t=setTimeout((function(){u({id:l,restaurantId:v})}),2e3);return function(){return clearTimeout(t)}}}),[g]),(0,y.jsxs)("div",{className:L.product,children:[(0,y.jsx)("div",{className:L.product__image,children:(0,y.jsxs)(p.rU,{className:L.product__imageLink,to:"/restaurant/".concat(v,"/product/").concat(l),children:[(0,y.jsx)("img",{alt:j,className:L.product__img,src:"/foodwagon_project"+m}),r>0&&(0,y.jsx)(C.s,{classNames:L.product__discount,discount:r,view:"smallLabel"})]})}),g?(0,y.jsxs)("div",{className:L.returnedBlock,children:[(0,y.jsx)("button",{className:i()(L.btnReturn,L.product__btnReturn),onClick:function(){return P(!1)},children:"Restore to cart"}),(0,y.jsx)("div",{className:i()(L.loadingBar,L.product__loadingBar),children:(0,y.jsx)("div",{className:L.loadingBar__inner,children:(0,y.jsx)("div",{className:L.loadingBar__shadow})})})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:i()(L.product__info,L.info),children:[(0,y.jsx)("p",{className:L.info__title,children:(0,y.jsx)(p.rU,{className:L.info__titleLink,to:"/restaurant/".concat(v,"/product/").concat(l),children:j})}),(0,y.jsxs)("p",{className:L.info__name,children:[(0,y.jsx)(o.G,{className:L.info__nameIcon,icon:_.opg}),(0,y.jsx)(p.rU,{className:L.info__nameLink,to:"/restaurant/".concat(v,"/product/").concat(l),children:x})]}),(0,y.jsx)(O.R,{discount:r,price:h})]}),(0,y.jsxs)("div",{className:i()(L.product__counter,L.counter),children:[(0,y.jsx)(w.A,{classNames:L.counter__btns,handleInputQuantity:function(t){t?s({id:l,price:h,quantity:t,restaurantId:v}):P(!0)},handleMinusProduct:function(){return a({id:l,restaurantId:v})},handlePlusProduct:function(){return n(k)},quantity:f}),(0,y.jsxs)("div",{className:L.counter__price,children:["$ ",e&&e.toFixed(2)]}),(0,y.jsx)("button",{className:i()(L.product__btnDelete,L.btnDelete),onClick:function(){return P(!0)},children:"x"})]})]})]})}var R="modal_popup__Iw8Rl",q="modal_popup__title__u-LTO",S="modal_popup__name__FGha9",E="modal_popup__btns__p2JrJ",A="modal_popup__btnClose__Yqwd5",D="modal_popupWrapper__Lac4P",F=(0,d.forwardRef)((function(t,e){var r=t.handleCloseModal,n=t.name,a=t.orderNumber,c=t.show,_=(0,u.v9)(f.Cn);return(0,y.jsx)(v.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,y.jsx)("div",{className:D,ref:e,children:(0,y.jsxs)("div",{className:R,children:[(0,y.jsx)("div",{className:q,children:(0,y.jsxs)("span",{className:S,children:["Order \u2116",a," from restaurant \xab",n,"\xbb was created, user: ",_]})}),(0,y.jsx)("div",{className:E,children:(0,y.jsx)("button",{className:A,onClick:r,children:"Close"})})]})})})})),U={cart:"cartPage_cart__kbPrS",cart__inner:"cartPage_cart__inner__VzE2p",cart__top:"cartPage_cart__top__Kqefj",cart__list:"cartPage_cart__list__cyCTb",cart__name:"cartPage_cart__name__V1i1J",cart__empty:"cartPage_cart__empty__-+AWz",cart__result:"cartPage_cart__result__Ag0V6",cart__result_color:"cartPage_cart__result_color__QOdNX",cart__image:"cartPage_cart__image__a+qBW",cart__clear:"cartPage_cart__clear__nnQvq",cart__clearIcon:"cartPage_cart__clearIcon__e+fev",cart__clearBtn:"cartPage_cart__clearBtn__j3-N9",cart__btnOrder:"cartPage_cart__btnOrder__hprFm",cart__orderInfo:"cartPage_cart__orderInfo__dHI1g",cart__restaurantName:"cartPage_cart__restaurantName__Pic3m",cart__linkSearch:"cartPage_cart__linkSearch__PPQHz"},z=["quantity"],Q=0;var T=function(){var t=(0,l.TH)().pathname,e=(0,d.useState)(""),r=(0,c.Z)(e,2),s=r[0],v=r[1],x=(0,d.useState)(""),j=(0,c.Z)(x,2),N=j[0],b=j[1],g=(0,d.useState)(!1),P=(0,c.Z)(g,2),k=P[0],w=P[1],C=(0,d.useState)(!1),O=(0,c.Z)(C,2),L=O[0],R=O[1],q=(0,d.useRef)(null),S=(0,d.useRef)(null),E=(0,u.v9)(h.fU),A=(0,u.v9)(h.iq),D=(0,u.v9)(h.co),T=(0,u.v9)(f.Kj),W=(0,u.I0)();m(k),m(L);var J=(0,l.s0)();return(0,d.useEffect)((function(){window.scrollTo(0,0)}),[t]),(0,d.useEffect)((function(){var t=function(t){var e;null!==(e=q.current)&&void 0!==e&&e.contains(t.target)&&w(!1)};return document.body.addEventListener("click",t),function(){return document.body.removeEventListener("click",t)}}),[]),D?(0,y.jsxs)("div",{className:U.cart,children:[(0,y.jsx)("div",{className:i()(U.cart__container,"container"),children:(0,y.jsx)("div",{className:U.cart__inner,children:D&&E.map((function(t){var e=(0,c.Z)(t,2),r=e[0],s=e[1],u=Object.values(s.items),l=s.totalAmount,p=s.totalCount,m=u[0]&&u[0].restaurantName;return(0,y.jsxs)("div",{className:i()(U.cart__order,U.cart__order_border),children:[(0,y.jsxs)("div",{className:U.cart__top,children:[(0,y.jsx)("div",{className:U.cart__restaurantName,children:m}),(0,y.jsx)("div",{className:U.cart__clear,children:(0,y.jsxs)("button",{className:U.cart__clearBtn,onClick:function(){return function(t){var e=t.restaurantId,r=t.restaurantName;v(r),b(e),w(!0)}({restaurantId:r,restaurantName:m})},children:[(0,y.jsx)(o.G,{className:U.cart__clearIcon,icon:_.Vui,size:"lg"}),"clear"]})})]}),(0,y.jsx)("div",{className:U.cart__list,children:p?(0,y.jsxs)(y.Fragment,{children:[u.map((function(t){var e=t.quantity,r=(0,a.Z)(t,z);return(0,d.createElement)(Z,(0,n.Z)((0,n.Z)({},r),{},{handleAddProduct:function(t){return e=t,void W((0,h.gK)(e));var e},handleDeleteProduct:function(t){return function(t,e){var r=t.id,n=t.restaurantId;W(e<1?(0,h.kh)({id:r,restaurantId:n}):(0,h.gb)({id:r,restaurantId:n}))}(t,e)},handleInputCount:function(t){return function(t){W((0,h.nQ)(t))}(t)},handleRemoveProduct:function(t){return function(t){var e=t.id,r=t.restaurantId;W((0,h.kh)({id:e,restaurantId:r}))}(t)},key:r.id,quantity:e}))})),(0,y.jsxs)("div",{className:i()(U.cart__orderInfo,U.cart__orderInfo_border),children:[(0,y.jsxs)("p",{className:U.cart__result,children:["Your order for the total amount $"," ",(0,y.jsx)("span",{className:U.cart__result_color,children:l&&l.toFixed(2)})," and"," ",(0,y.jsx)("span",{className:U.cart__result_color,children:p})," items"]}),(0,y.jsx)(B.k,{name:"Place an order",onClick:function(){return function(t,e){var r=A[t];T?(v(e),b(t),Q++,R(!0),W((0,f.qQ)({list:r,name:e,orderNumber:Q}))):J("/login")}(r,m)}})]})]}):null})]},r)}))})}),(0,y.jsx)(F,{handleCloseModal:function(){W((0,h.LL)({restaurantId:N})),R(!1)},name:s,orderNumber:Q,ref:S,show:L}),(0,y.jsx)(I,{handleClearOrder:function(){W((0,h.LL)({restaurantId:N})),w(!1)},handleClosePopup:function(){w(!1)},name:s,ref:q,show:k})]}):(0,y.jsx)("div",{className:U.cart,children:(0,y.jsx)("div",{className:i()(U.cart__container,"container"),children:(0,y.jsx)("div",{className:U.cart__inner,children:(0,y.jsxs)("div",{className:U.cart__empty,children:[(0,y.jsx)("p",{className:U.cart__name,children:"Shopping cart is empty"}),(0,y.jsx)("p",{className:U.cart__result,children:"Use the search to find everything you need."}),(0,y.jsx)(p.rU,{className:U.cart__linkSearch,to:"/search",children:"Go to search page"})]})})})})}},3782:function(t,e,r){r.d(e,{R:function(){return s}});var n=r(4942),a=r(1694),c=r.n(a),_={priceBlock__price:"priceBlock_priceBlock__price__4GC02",priceBlock__price_theme:"priceBlock_priceBlock__price_theme__pxvvX"},o=r(184);function s(t){var e=t.discount,r=t.price;return(0,o.jsxs)("div",{className:_.priceBlock,children:[e?(0,o.jsxs)("div",{className:_.priceBlock__price,children:["$ ",(r-r*e/100).toFixed(2)]}):null,(0,o.jsxs)("div",{className:c()(_.priceBlock__price,(0,n.Z)({},_.priceBlock__price_theme,e)),children:["$",r.toFixed(2)]})]})}},630:function(t,e,r){r.d(e,{A:function(){return d}});var n=r(4942),a=r(9439),c=r(1694),_=r.n(c),o=r(2791),s={buttons:"counter_buttons__MwR8a",buttons__input:"counter_buttons__input__cPDJv",button:"counter_button__F1VDI",disabledBtn:"counter_disabledBtn__mVuPx"},i=r(184);function d(t){var e=t.classNames,r=t.handleInputQuantity,c=t.handleMinusProduct,d=t.handlePlusProduct,u=t.quantity,l=(0,o.useState)(u),p=(0,a.Z)(l,2),m=p[0],h=p[1];return(0,i.jsxs)("div",{className:_()(s.buttons,e),children:[(0,i.jsx)("button",{className:_()(s.button,s.buttons__plus,(0,n.Z)({},s.disabledBtn,m>98)),disabled:m>98,onClick:function(){d(),h(m+1)},children:"+"}),(0,i.jsx)("input",{className:_()(s.buttons__input),maxLength:"2",onChange:function(t){var e=t.target.value.replace(/[^0-9]/gi,"");""!==e?(h(+e),r(+e)):h("")},type:"text",value:m}),(0,i.jsx)("button",{className:_()(s.buttons__minus,s.button),onClick:function(){c(),h(m-1)},children:"\u2013"})]})}d.defaultProps={quantity:0}},4419:function(t,e,r){r.d(e,{s:function(){return h}});var n=r(4942),a=r(1694),c=r.n(a),_="discount_label__jB0h4",o="discount_label__discount__NdxTg",s="discount_label__discountPercent__0Xzk2",i="discount_label__discountOff__0eCdn",d="discount_smallLabel__JhXcr",u="discount_smallLabel__discount__lvwUU",l="discount_smallLabel__discountPercent__vbNrZ",p="discount_smallLabel__discountOff__cFEvX",m=r(184);function h(t){var e=t.classNames,r=t.discount,a="smallLabel"===t.view;return(0,m.jsxs)("div",{className:c()(_,e,(0,n.Z)({},d,a)),children:[(0,m.jsx)("div",{className:c()(o,(0,n.Z)({},u,a)),children:r}),(0,m.jsx)("div",{className:c()(s,(0,n.Z)({},l,a)),children:"%"}),(0,m.jsx)("div",{className:c()(i,(0,n.Z)({},p,a)),children:"off"})]})}},9831:function(t,e,r){r.d(e,{k:function(){return s}});var n=r(1694),a=r.n(n),c=r(3080),_={buttonOrder:"buttonOrder_buttonOrder__e7jBP"},o=r(184);function s(t){var e=t.classNames,r=t.name,n=t.onClick;return(0,o.jsxs)("button",{className:a()(_.buttonOrder,e),onClick:n,children:[r,(0,o.jsx)(c.Q,{className:_.buttonOrder__icon,src:"".concat("/foodwagon_project","/images/cards-big/btn.svg"),wrapper:"span"})]})}},5987:function(t,e,r){r.d(e,{Z:function(){return a}});var n=r(3366);function a(t,e){if(null==t)return{};var r,a,c=(0,n.Z)(t,e);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(t);for(a=0;a<_.length;a++)r=_[a],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(c[r]=t[r])}return c}}}]);
//# sourceMappingURL=490.48366bb5.chunk.js.map