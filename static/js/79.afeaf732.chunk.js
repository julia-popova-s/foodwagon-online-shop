"use strict";(self.webpackChunkfoodwagon_project=self.webpackChunkfoodwagon_project||[]).push([[79],{4079:function(t,r,e){e.r(r),e.d(r,{default:function(){return T}});var n=e(1413),a=e(5987),c=e(9439),_=e(1632),s=e(9806),o=e(1694),i=e.n(o),d=e(2791),u=e(9434),l=e(7689),p=e(1087),m=e(6721),h=e(4346),f=e(549),j="popup_popup__ih4BR",x="popup_popup__title__x4TCg",N="popup_popup__btns__Fw43h",v="popup_popup__btnOk__rlN5q",b="popup_popup__btnClose__bnhYs",g="popup_popupWrapper__Dhdqd",P=e(184),k=(0,d.forwardRef)((function(t,r){var e=t.children,n=t.handleClickClose,a=t.handleClickOk,c=t.show;return(0,P.jsx)(f.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,P.jsx)("div",{className:g,ref:r,children:(0,P.jsxs)("div",{className:j,children:[(0,P.jsx)("div",{className:x,children:e}),(0,P.jsxs)("div",{className:N,children:[(0,P.jsx)("button",{className:v,onClick:a,children:"Ok"}),(0,P.jsx)("button",{className:b,onClick:n,children:"Close"})]})]})})})})),B=e(3169),I=e(630),y=e(4419),C=e(3782),w={product:"cardProduct_product__SJi7l",product__image:"cardProduct_product__image__ThUnz",product__img:"cardProduct_product__img__ehQ1I",product__btnReturn:"cardProduct_product__btnReturn__Hm301",product__btnDelete:"cardProduct_product__btnDelete__kybGw",info:"cardProduct_info__u5hsB",info__title:"cardProduct_info__title__ysSyy",info__titleLink:"cardProduct_info__titleLink__uUn+A",info__name:"cardProduct_info__name__Fn32N",info__nameIcon:"cardProduct_info__nameIcon__94srq",info__nameLink:"cardProduct_info__nameLink__ALZyc",info__price:"cardProduct_info__price__Dxnf-",info__price_theme:"cardProduct_info__price_theme__0dj9R",counter:"cardProduct_counter__UHr1I",counter__btns:"cardProduct_counter__btns__Qgpk0",counter__price:"cardProduct_counter__price__47qTB",loadingBar:"cardProduct_loadingBar__kqluD",loadingBar__inner:"cardProduct_loadingBar__inner__YzXAb",loading:"cardProduct_loading__DyW+Y",loadingBar__shadow:"cardProduct_loadingBar__shadow__zAJNg",btnReturn:"cardProduct_btnReturn__ozn8+",returnedBlock:"cardProduct_returnedBlock__+IejE",product__counterWithPrice:"cardProduct_product__counterWithPrice__CzWiO",product__info:"cardProduct_product__info__swjXc"};function L(t){var r=t.amount,e=t.discount,n=t.handleAddProduct,a=t.handleDeleteProduct,o=t.handleInputCount,u=t.handleRemoveProduct,l=t.id,m=t.image,h=t.price,f=t.quantity,j=t.restaurantId,x=t.restaurantName,N=t.title,v=(0,d.useState)(!1),b=(0,c.Z)(v,2),g=b[0],k=b[1],B={discount:e,id:l,image:m,price:h,restaurantId:j,restaurantName:x,title:N};return(0,d.useEffect)((function(){if(g){var t=setTimeout((function(){u({id:l,restaurantId:j})}),2e3);return function(){return clearTimeout(t)}}}),[g]),(0,P.jsxs)("div",{className:w.product,children:[(0,P.jsx)("div",{className:w.product__image,children:(0,P.jsxs)(p.rU,{className:w.product__imageLink,to:"/restaurant/".concat(j,"/product/").concat(l),children:[(0,P.jsx)("img",{alt:N,className:w.product__img,src:"/foodwagon_project"+m}),e>0&&(0,P.jsx)(y.s,{classNames:w.product__discount,discount:e,view:"smallLabel"})]})}),g?(0,P.jsxs)("div",{className:w.returnedBlock,children:[(0,P.jsx)("button",{className:i()(w.btnReturn,w.product__btnReturn),onClick:function(){return k(!1)},children:"Restore to cart"}),(0,P.jsx)("div",{className:i()(w.loadingBar,w.product__loadingBar),children:(0,P.jsx)("div",{className:w.loadingBar__inner,children:(0,P.jsx)("div",{className:w.loadingBar__shadow})})})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:i()(w.product__info,w.info),children:[(0,P.jsx)("p",{className:w.info__title,children:(0,P.jsx)(p.rU,{className:w.info__titleLink,to:"/restaurant/".concat(j,"/product/").concat(l),children:N})}),(0,P.jsxs)("p",{className:w.info__name,children:[(0,P.jsx)(s.G,{className:w.info__nameIcon,icon:_.opg}),(0,P.jsx)(p.rU,{className:w.info__nameLink,to:"/restaurant/".concat(j,"/product/").concat(l),children:x})]}),(0,P.jsx)(C.R,{discount:e,price:h})]}),(0,P.jsxs)("div",{className:i()(w.product__counter,w.counter),children:[(0,P.jsx)(I.A,{classNames:w.counter__btns,handleInputQuantity:function(t){t?o({id:l,price:h,quantity:t,restaurantId:j}):k(!0)},handleMinusProduct:function(){return a({id:l,restaurantId:j})},handlePlusProduct:function(){return n(B)},quantity:f}),(0,P.jsxs)("div",{className:w.counter__price,children:["$ ",r&&r.toFixed(2)]}),(0,P.jsx)("button",{className:i()(w.product__btnDelete,w.btnDelete),onClick:function(){return k(!0)},children:"x"})]})]})]})}var Z="modal_popup__Iw8Rl",O="modal_popup__title__u-LTO",q="modal_popup__name__FGha9",R="modal_popup__btns__p2JrJ",U="modal_popup__btnClose__Yqwd5",A="modal_popupWrapper__Lac4P",F=(0,d.forwardRef)((function(t,r){var e=t.handleCloseModal,n=t.name,a=t.orderNumber,c=t.show,_=(0,u.v9)(h.Cn);return(0,P.jsx)(f.Z,{classNames:"alert",in:c,timeout:300,unmountOnExit:!0,children:(0,P.jsx)("div",{className:A,ref:r,children:(0,P.jsxs)("div",{className:Z,children:[(0,P.jsx)("div",{className:O,children:(0,P.jsxs)("span",{className:q,children:["Order \u2116",a," from restaurant \xab",n,"\xbb was created, user: ",_]})}),(0,P.jsx)("div",{className:R,children:(0,P.jsx)("button",{className:U,onClick:e,children:"Close"})})]})})})})),S={cart:"cartPage_cart__kbPrS",cart__title:"cartPage_cart__title__pY8B-",cart__inner:"cartPage_cart__inner__VzE2p",cart__top:"cartPage_cart__top__Kqefj",cart__list:"cartPage_cart__list__cyCTb",cart__name:"cartPage_cart__name__V1i1J",cart__empty:"cartPage_cart__empty__-+AWz",cart__result:"cartPage_cart__result__Ag0V6",cart__result_color:"cartPage_cart__result_color__QOdNX",cart__image:"cartPage_cart__image__a+qBW",cart__clear:"cartPage_cart__clear__nnQvq",cart__clearIcon:"cartPage_cart__clearIcon__e+fev",cart__clearBtn:"cartPage_cart__clearBtn__j3-N9",cart__btnOrder:"cartPage_cart__btnOrder__hprFm",cart__orderInfo:"cartPage_cart__orderInfo__dHI1g",cart__restaurantName:"cartPage_cart__restaurantName__Pic3m",cart__links:"cartPage_cart__links__dUrNl",cart__linkItem:"cartPage_cart__linkItem__JqxUc",popup__name:"cartPage_popup__name__9Lo1-"},D=["quantity"],E=0;var T=function(){var t=(0,l.TH)().pathname,r=(0,d.useState)(""),e=(0,c.Z)(r,2),o=e[0],f=e[1],j=(0,d.useState)(""),x=(0,c.Z)(j,2),N=x[0],v=x[1],b=(0,d.useState)(!1),g=(0,c.Z)(b,2),I=g[0],y=g[1],C=(0,d.useState)(!1),w=(0,c.Z)(C,2),Z=w[0],O=w[1],q=(0,d.useRef)(null),R=(0,d.useRef)(null),U=(0,u.v9)(m.fU),A=(0,u.v9)(m.iq),T=(0,u.v9)(m.co),z=(0,u.v9)(h.Kj),J=(0,u.I0)(),Q=(0,l.s0)();return(0,d.useEffect)((function(){window.scrollTo(0,0)}),[t]),(0,d.useEffect)((function(){var t=function(t){var r;null!==(r=q.current)&&void 0!==r&&r.contains(t.target)&&y(!1)};return document.body.addEventListener("click",t),function(){return document.body.removeEventListener("click",t)}}),[]),T?(0,P.jsxs)("div",{className:S.cart,children:[(0,P.jsxs)("div",{className:i()(S.cart__container,"container"),children:[(0,P.jsx)("h1",{className:S.cart__title,children:"Shopping cart"}),(0,P.jsx)("div",{className:S.cart__inner,children:T&&U.map((function(t){var r=(0,c.Z)(t,2),e=r[0],o=r[1],u=Object.values(o.items),l=o.totalAmount,p=o.totalCount,j=u[0]&&u[0].restaurantName;return(0,P.jsxs)("div",{className:i()(S.cart__order,S.cart__order_border),children:[(0,P.jsxs)("div",{className:S.cart__top,children:[(0,P.jsx)("div",{className:S.cart__restaurantName,children:j}),(0,P.jsx)("div",{className:S.cart__clear,children:(0,P.jsxs)("button",{className:S.cart__clearBtn,onClick:function(){return function(t){var r=t.restaurantId,e=t.restaurantName;f(e),v(r),y(!0)}({restaurantId:e,restaurantName:j})},children:[(0,P.jsx)(s.G,{className:S.cart__clearIcon,icon:_.Vui,size:"lg"}),"clear"]})})]}),(0,P.jsx)("div",{className:S.cart__list,children:p?(0,P.jsxs)(P.Fragment,{children:[u.map((function(t){var r=t.quantity,e=(0,a.Z)(t,D);return(0,d.createElement)(L,(0,n.Z)((0,n.Z)({},e),{},{handleAddProduct:function(t){return r=t,void J((0,m.gK)(r));var r},handleDeleteProduct:function(t){return function(t,r){var e=t.id,n=t.restaurantId;J(r<1?(0,m.kh)({id:e,restaurantId:n}):(0,m.gb)({id:e,restaurantId:n}))}(t,r)},handleInputCount:function(t){return function(t){J((0,m.nQ)(t))}(t)},handleRemoveProduct:function(t){return function(t){var r=t.id,e=t.restaurantId;J((0,m.kh)({id:r,restaurantId:e}))}(t)},key:e.id,quantity:r}))})),(0,P.jsxs)("div",{className:i()(S.cart__orderInfo,S.cart__orderInfo_border),children:[(0,P.jsxs)("p",{className:S.cart__result,children:["Your order for the total amount $"," ",(0,P.jsx)("span",{className:S.cart__result_color,children:l&&l.toFixed(2)})," and"," ",(0,P.jsx)("span",{className:S.cart__result_color,children:p})," items"]}),(0,P.jsx)(B.s,{name:"Place an order",onClick:function(){return function(t,r){var e=A[t];z?(f(r),v(t),E++,O(!0),J((0,h.qQ)({list:e,name:r,orderNumber:E}))):Q("/login")}(e,j)}})]})]}):null})]},e)}))})]}),(0,P.jsx)(F,{handleCloseModal:function(){J((0,m.LL)({restaurantId:N})),O(!1)},name:o,orderNumber:E,ref:R,show:Z}),(0,P.jsx)(k,{handleClickClose:function(){y(!1)},handleClickOk:function(){J((0,m.LL)({restaurantId:N})),y(!1)},ref:q,show:I,children:(0,P.jsxs)(P.Fragment,{children:["Are you sure you want to empty the cart from ",(0,P.jsxs)("span",{className:S.popup__name,children:["\xab",o,"\xbb"]}),"?"]})})]}):(0,P.jsx)("div",{className:S.cart,children:(0,P.jsx)("div",{className:i()(S.cart__container,"container"),children:(0,P.jsx)("div",{className:S.cart__inner,children:(0,P.jsxs)("div",{className:S.cart__empty,children:[(0,P.jsx)("p",{className:S.cart__name,children:"Shopping cart is empty"}),(0,P.jsx)("p",{className:S.cart__result,children:"Use the search to find everything you need."}),(0,P.jsxs)("p",{className:S.cart__links,children:["Go to"," ",(0,P.jsx)(p.rU,{className:S.cart__linkItem,to:"/search",children:"search page"})," ","or"," ",(0,P.jsx)(p.rU,{className:S.cart__linkItem,to:"/",children:"menu"})]})]})})})})}},3782:function(t,r,e){e.d(r,{R:function(){return o}});var n=e(4942),a=e(1694),c=e.n(a),_={priceBlock__price:"priceBlock_priceBlock__price__4GC02",priceBlock__price_theme:"priceBlock_priceBlock__price_theme__pxvvX"},s=e(184);function o(t){var r=t.classNames,e=t.discount,a=t.price;return(0,s.jsxs)("div",{className:_.priceBlock,children:[e?(0,s.jsxs)("div",{className:c()(_.priceBlock__price,r),children:["$ ",(a-a*e/100).toFixed(2)]}):null,(0,s.jsxs)("div",{className:c()(_.priceBlock__price,r,(0,n.Z)({},_.priceBlock__price_theme,e)),children:["$",a.toFixed(2)]})]})}},630:function(t,r,e){e.d(r,{A:function(){return d}});var n=e(4942),a=e(9439),c=e(1694),_=e.n(c),s=e(2791),o={buttons:"counter_buttons__MwR8a",buttons__input:"counter_buttons__input__cPDJv",button:"counter_button__F1VDI",disabledBtn:"counter_disabledBtn__mVuPx"},i=e(184);function d(t){var r=t.classNames,e=t.handleInputQuantity,c=t.handleMinusProduct,d=t.handlePlusProduct,u=t.quantity,l=(0,s.useState)(u),p=(0,a.Z)(l,2),m=p[0],h=p[1];return(0,i.jsxs)("div",{className:_()(o.buttons,r),children:[(0,i.jsx)("button",{className:_()(o.button,o.buttons__plus,(0,n.Z)({},o.disabledBtn,m>98)),disabled:m>98,onClick:function(){d(),h(m+1)},children:"+"}),(0,i.jsx)("input",{className:_()(o.buttons__input),maxLength:"2",onChange:function(t){var r=t.target.value.replace(/[^0-9]/gi,"");""!==r?(h(+r),e(+r)):h("")},type:"text",value:m}),(0,i.jsx)("button",{className:_()(o.buttons__minus,o.button),onClick:function(){c(),h(m-1)},children:"\u2013"})]})}d.defaultProps={quantity:0}},4419:function(t,r,e){e.d(r,{s:function(){return h}});var n=e(4942),a=e(1694),c=e.n(a),_="discount_label__jB0h4",s="discount_label__discount__NdxTg",o="discount_label__discountPercent__0Xzk2",i="discount_label__discountOff__0eCdn",d="discount_smallLabel__JhXcr",u="discount_smallLabel__discount__lvwUU",l="discount_smallLabel__discountPercent__vbNrZ",p="discount_smallLabel__discountOff__cFEvX",m=e(184);function h(t){var r=t.classNames,e=t.discount,a="smallLabel"===t.view;return(0,m.jsxs)("div",{className:c()(_,r,(0,n.Z)({},d,a)),children:[(0,m.jsx)("div",{className:c()(s,(0,n.Z)({},u,a)),children:e}),(0,m.jsx)("div",{className:c()(o,(0,n.Z)({},l,a)),children:"%"}),(0,m.jsx)("div",{className:c()(i,(0,n.Z)({},p,a)),children:"off"})]})}},3169:function(t,r,e){e.d(r,{s:function(){return o}});var n=e(1694),a=e.n(n),c=e(3080),_={orderButton:"orderButton_orderButton__AtGJj"},s=e(184);function o(t){var r=t.classNames,e=t.name,n=t.onClick;return(0,s.jsxs)("button",{className:a()(_.orderButton,r),onClick:n,children:[e,(0,s.jsx)(c.Q,{className:_.orderButton__icon,src:"".concat("/foodwagon_project","/images/cards-big/btn.svg"),wrapper:"span"})]})}},5987:function(t,r,e){e.d(r,{Z:function(){return a}});var n=e(3366);function a(t,r){if(null==t)return{};var e,a,c=(0,n.Z)(t,r);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(t);for(a=0;a<_.length;a++)e=_[a],r.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(c[e]=t[e])}return c}}}]);
//# sourceMappingURL=79.afeaf732.chunk.js.map